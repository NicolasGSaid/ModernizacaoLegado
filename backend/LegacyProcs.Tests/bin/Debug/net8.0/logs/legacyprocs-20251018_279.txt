2025-10-18 23:31:58.437 -03:00 [INF] Iniciando ListarOrdensServicoQuery: {"Filtro":null,"Page":1,"PageSize":10,"$type":"ListarOrdensServicoQuery"} {"SourceContext":"LegacyProcs.Application.Behaviors.LoggingBehavior","ActionId":"7f94a8af-e1d9-46f5-a3fd-6febd96df1a9","ActionName":"LegacyProcs.Controllers.OrdemServicoController.Get (LegacyProcs)","RequestId":"0HNGEMULB5UMR","RequestPath":"/api/ordemservico","Application":"LegacyProcs","Environment":"Production"}
2025-10-18 23:31:58.449 -03:00 [INF] Listando ordens de serviço. Filtro: null, Page: 1, PageSize: 10 {"SourceContext":"LegacyProcs.Application.Queries.ListarOrdensServicoQueryHandler","ActionId":"7f94a8af-e1d9-46f5-a3fd-6febd96df1a9","ActionName":"LegacyProcs.Controllers.OrdemServicoController.Get (LegacyProcs)","RequestId":"0HNGEMULB5UMR","RequestPath":"/api/ordemservico","Application":"LegacyProcs","Environment":"Production"}
2025-10-18 23:31:58.451 -03:00 [ERR] Erro em ListarOrdensServicoQuery após 14ms: Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider. {"SourceContext":"LegacyProcs.Application.Behaviors.LoggingBehavior","ActionId":"7f94a8af-e1d9-46f5-a3fd-6febd96df1a9","ActionName":"LegacyProcs.Controllers.OrdemServicoController.Get (LegacyProcs)","RequestId":"0HNGEMULB5UMR","RequestPath":"/api/ordemservico","Application":"LegacyProcs","Environment":"Production"}
System.InvalidOperationException: Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.Initialize(IServiceProvider scopedProvider, DbContextOptions contextOptions, DbContext context)
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.CountAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at LegacyProcs.Infrastructure.Repositories.OrdemServicoRepository.GetPagedAsync(Int32 page, Int32 pageSize, String filtro) in C:\Users\pagam\OneDrive\Documentos\GitHub\Trabalho\TesteTimeLegado\backend\LegacyProcs\Infrastructure\Repositories\OrdemServicoRepository.cs:line 63
   at LegacyProcs.Application.Queries.ListarOrdensServicoQueryHandler.Handle(ListarOrdensServicoQuery request, CancellationToken cancellationToken) in C:\Users\pagam\OneDrive\Documentos\GitHub\Trabalho\TesteTimeLegado\backend\LegacyProcs\Application\Queries\ListarOrdensServicoQueryHandler.cs:line 31
   at LegacyProcs.Application.Behaviors.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\pagam\OneDrive\Documentos\GitHub\Trabalho\TesteTimeLegado\backend\LegacyProcs\Application\Behaviors\LoggingBehavior.cs:line 28
2025-10-18 23:31:58.466 -03:00 [ERR] Erro inesperado ao listar ordens de serviço {"SourceContext":"LegacyProcs.Controllers.OrdemServicoController","ActionId":"7f94a8af-e1d9-46f5-a3fd-6febd96df1a9","ActionName":"LegacyProcs.Controllers.OrdemServicoController.Get (LegacyProcs)","RequestId":"0HNGEMULB5UMR","RequestPath":"/api/ordemservico","Application":"LegacyProcs","Environment":"Production"}
System.InvalidOperationException: Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.Initialize(IServiceProvider scopedProvider, DbContextOptions contextOptions, DbContext context)
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.CountAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at LegacyProcs.Infrastructure.Repositories.OrdemServicoRepository.GetPagedAsync(Int32 page, Int32 pageSize, String filtro) in C:\Users\pagam\OneDrive\Documentos\GitHub\Trabalho\TesteTimeLegado\backend\LegacyProcs\Infrastructure\Repositories\OrdemServicoRepository.cs:line 63
   at LegacyProcs.Application.Queries.ListarOrdensServicoQueryHandler.Handle(ListarOrdensServicoQuery request, CancellationToken cancellationToken) in C:\Users\pagam\OneDrive\Documentos\GitHub\Trabalho\TesteTimeLegado\backend\LegacyProcs\Application\Queries\ListarOrdensServicoQueryHandler.cs:line 31
   at LegacyProcs.Application.Behaviors.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\pagam\OneDrive\Documentos\GitHub\Trabalho\TesteTimeLegado\backend\LegacyProcs\Application\Behaviors\LoggingBehavior.cs:line 28
   at LegacyProcs.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\pagam\OneDrive\Documentos\GitHub\Trabalho\TesteTimeLegado\backend\LegacyProcs\Application\Behaviors\ValidationBehavior.cs:line 37
   at LegacyProcs.Controllers.OrdemServicoController.Get(String filtro, Int32 page, Int32 pageSize) in C:\Users\pagam\OneDrive\Documentos\GitHub\Trabalho\TesteTimeLegado\backend\LegacyProcs\Controllers\OrdemServicoController.cs:line 70
2025-10-18 23:31:58.468 -03:00 [INF] Executing ObjectResult, writing value of type 'System.String'. {"EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"7f94a8af-e1d9-46f5-a3fd-6febd96df1a9","ActionName":"LegacyProcs.Controllers.OrdemServicoController.Get (LegacyProcs)","RequestId":"0HNGEMULB5UMR","RequestPath":"/api/ordemservico","Application":"LegacyProcs","Environment":"Production"}
2025-10-18 23:31:58.468 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost/api/ordemservico?filtro=teste&page=1&pageSize=5 - null null {"EventId":{"Id":1},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNGEMULB5UNU","RequestPath":"/api/ordemservico","Application":"LegacyProcs","Environment":"Production"}
2025-10-18 23:31:58.469 -03:00 [WRN] Resposta com erro 500 para /api/ordemservico de Unknown {"SourceContext":"LegacyProcs.Infrastructure.Middleware.SecurityHeadersMiddleware","RequestId":"0HNGEMULB5UMR","RequestPath":"/api/ordemservico","Application":"LegacyProcs","Environment":"Production"}
2025-10-18 23:31:58.476 -03:00 [INF] Executing endpoint 'LegacyProcs.Controllers.OrdemServicoController.Get (LegacyProcs)' {"EventId":{"Name":"ExecutingEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNGEMULB5UNU","RequestPath":"/api/ordemservico","Application":"LegacyProcs","Environment":"Production"}
2025-10-18 23:31:58.483 -03:00 [INF] Route matched with {action = "Get", controller = "OrdemServico"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.String, Int32, Int32) on controller LegacyProcs.Controllers.OrdemServicoController (LegacyProcs). {"EventId":{"Id":102,"Name":"ControllerActionExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","ActionId":"4f40fba5-da66-4ff0-b78b-07a55596bb50","ActionName":"LegacyProcs.Controllers.OrdemServicoController.Get (LegacyProcs)","RequestId":"0HNGEMULB5UNU","RequestPath":"/api/ordemservico","Application":"LegacyProcs","Environment":"Production"}
2025-10-18 23:31:58.484 -03:00 [INF] Iniciando ListarOrdensServicoQuery: {"Filtro":"teste","Page":1,"PageSize":5,"$type":"ListarOrdensServicoQuery"} {"SourceContext":"LegacyProcs.Application.Behaviors.LoggingBehavior","ActionId":"4f40fba5-da66-4ff0-b78b-07a55596bb50","ActionName":"LegacyProcs.Controllers.OrdemServicoController.Get (LegacyProcs)","RequestId":"0HNGEMULB5UNU","RequestPath":"/api/ordemservico","Application":"LegacyProcs","Environment":"Production"}
2025-10-18 23:31:58.484 -03:00 [INF] Listando ordens de serviço. Filtro: teste, Page: 1, PageSize: 5 {"SourceContext":"LegacyProcs.Application.Queries.ListarOrdensServicoQueryHandler","ActionId":"4f40fba5-da66-4ff0-b78b-07a55596bb50","ActionName":"LegacyProcs.Controllers.OrdemServicoController.Get (LegacyProcs)","RequestId":"0HNGEMULB5UNU","RequestPath":"/api/ordemservico","Application":"LegacyProcs","Environment":"Production"}
2025-10-18 23:31:58.485 -03:00 [ERR] Erro em ListarOrdensServicoQuery após 1ms: Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider. {"SourceContext":"LegacyProcs.Application.Behaviors.LoggingBehavior","ActionId":"4f40fba5-da66-4ff0-b78b-07a55596bb50","ActionName":"LegacyProcs.Controllers.OrdemServicoController.Get (LegacyProcs)","RequestId":"0HNGEMULB5UNU","RequestPath":"/api/ordemservico","Application":"LegacyProcs","Environment":"Production"}
System.InvalidOperationException: Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.Initialize(IServiceProvider scopedProvider, DbContextOptions contextOptions, DbContext context)
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
   at System.Linq.Queryable.Where[TSource](IQueryable`1 source, Expression`1 predicate)
   at LegacyProcs.Infrastructure.Repositories.OrdemServicoRepository.GetPagedAsync(Int32 page, Int32 pageSize, String filtro) in C:\Users\pagam\OneDrive\Documentos\GitHub\Trabalho\TesteTimeLegado\backend\LegacyProcs\Infrastructure\Repositories\OrdemServicoRepository.cs:line 60
   at LegacyProcs.Application.Queries.ListarOrdensServicoQueryHandler.Handle(ListarOrdensServicoQuery request, CancellationToken cancellationToken) in C:\Users\pagam\OneDrive\Documentos\GitHub\Trabalho\TesteTimeLegado\backend\LegacyProcs\Application\Queries\ListarOrdensServicoQueryHandler.cs:line 31
   at LegacyProcs.Application.Behaviors.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\pagam\OneDrive\Documentos\GitHub\Trabalho\TesteTimeLegado\backend\LegacyProcs\Application\Behaviors\LoggingBehavior.cs:line 28
2025-10-18 23:31:58.487 -03:00 [ERR] Erro inesperado ao listar ordens de serviço {"SourceContext":"LegacyProcs.Controllers.OrdemServicoController","ActionId":"4f40fba5-da66-4ff0-b78b-07a55596bb50","ActionName":"LegacyProcs.Controllers.OrdemServicoController.Get (LegacyProcs)","RequestId":"0HNGEMULB5UNU","RequestPath":"/api/ordemservico","Application":"LegacyProcs","Environment":"Production"}
System.InvalidOperationException: Services for database providers 'Microsoft.EntityFrameworkCore.SqlServer', 'Microsoft.EntityFrameworkCore.InMemory' have been registered in the service provider. Only a single database provider can be registered in a service provider. If possible, ensure that Entity Framework is managing its service provider by removing the call to 'UseInternalServiceProvider'. Otherwise, consider conditionally registering the database provider, or maintaining one service provider per database provider.
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.Initialize(IServiceProvider scopedProvider, DbContextOptions contextOptions, DbContext context)
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
   at System.Linq.Queryable.Where[TSource](IQueryable`1 source, Expression`1 predicate)
   at LegacyProcs.Infrastructure.Repositories.OrdemServicoRepository.GetPagedAsync(Int32 page, Int32 pageSize, String filtro) in C:\Users\pagam\OneDrive\Documentos\GitHub\Trabalho\TesteTimeLegado\backend\LegacyProcs\Infrastructure\Repositories\OrdemServicoRepository.cs:line 60
   at LegacyProcs.Application.Queries.ListarOrdensServicoQueryHandler.Handle(ListarOrdensServicoQuery request, CancellationToken cancellationToken) in C:\Users\pagam\OneDrive\Documentos\GitHub\Trabalho\TesteTimeLegado\backend\LegacyProcs\Application\Queries\ListarOrdensServicoQueryHandler.cs:line 31
   at LegacyProcs.Application.Behaviors.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\pagam\OneDrive\Documentos\GitHub\Trabalho\TesteTimeLegado\backend\LegacyProcs\Application\Behaviors\LoggingBehavior.cs:line 28
   at LegacyProcs.Application.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\pagam\OneDrive\Documentos\GitHub\Trabalho\TesteTimeLegado\backend\LegacyProcs\Application\Behaviors\ValidationBehavior.cs:line 37
   at LegacyProcs.Controllers.OrdemServicoController.Get(String filtro, Int32 page, Int32 pageSize) in C:\Users\pagam\OneDrive\Documentos\GitHub\Trabalho\TesteTimeLegado\backend\LegacyProcs\Controllers\OrdemServicoController.cs:line 70
2025-10-18 23:31:58.489 -03:00 [INF] Executing ObjectResult, writing value of type 'System.String'. {"EventId":{"Id":1,"Name":"ObjectResultExecuting"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor","ActionId":"4f40fba5-da66-4ff0-b78b-07a55596bb50","ActionName":"LegacyProcs.Controllers.OrdemServicoController.Get (LegacyProcs)","RequestId":"0HNGEMULB5UNU","RequestPath":"/api/ordemservico","Application":"LegacyProcs","Environment":"Production"}
2025-10-18 23:31:58.489 -03:00 [INF] Executed action LegacyProcs.Controllers.OrdemServicoController.Get (LegacyProcs) in 5.8841ms {"EventId":{"Id":105,"Name":"ActionExecuted"},"SourceContext":"Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker","RequestId":"0HNGEMULB5UNU","RequestPath":"/api/ordemservico","Application":"LegacyProcs","Environment":"Production"}
2025-10-18 23:31:58.489 -03:00 [INF] Executed endpoint 'LegacyProcs.Controllers.OrdemServicoController.Get (LegacyProcs)' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"SourceContext":"Microsoft.AspNetCore.Routing.EndpointMiddleware","RequestId":"0HNGEMULB5UNU","RequestPath":"/api/ordemservico","Application":"LegacyProcs","Environment":"Production"}
2025-10-18 23:31:58.489 -03:00 [WRN] Resposta com erro 500 para /api/ordemservico de Unknown {"SourceContext":"LegacyProcs.Infrastructure.Middleware.SecurityHeadersMiddleware","RequestId":"0HNGEMULB5UNU","RequestPath":"/api/ordemservico","Application":"LegacyProcs","Environment":"Production"}
2025-10-18 23:31:58.489 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost/api/ordemservico?filtro=teste&page=1&pageSize=5 - 500 null text/plain; charset=utf-8 21.3149ms {"EventId":{"Id":2},"SourceContext":"Microsoft.AspNetCore.Hosting.Diagnostics","RequestId":"0HNGEMULB5UNU","RequestPath":"/api/ordemservico","Application":"LegacyProcs","Environment":"Production"}
