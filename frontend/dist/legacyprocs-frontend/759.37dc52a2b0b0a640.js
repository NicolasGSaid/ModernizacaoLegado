"use strict";(self.webpackChunklegacyprocs_frontend=self.webpackChunklegacyprocs_frontend||[]).push([[759],{3759:(R,f,r)=>{r.r(f),r.d(f,{TecnicoFormComponent:()=>G});var e=r(4438),g=r(177),i=r(9417),h=r(8498),x=r(6467),k=r(9631),T=r(8834),y=r(2798),b=r(2242),v=r(4635),E=r(675),C=r(1141),F=r(491),I=r(8623),O=r(6356),u=function(t){return t.Ativo="Ativo",t.Inativo="Inativo",t}(u||{});function M(t,m){1&t&&(e.j41(0,"small",19),e.EFF(1," Nome \xe9 obrigat\xf3rio "),e.k0s())}function j(t,m){1&t&&(e.j41(0,"small",19),e.EFF(1," Email \xe9 obrigat\xf3rio "),e.k0s())}function P(t,m){1&t&&(e.j41(0,"small",19),e.EFF(1," Email inv\xe1lido "),e.k0s())}function S(t,m){1&t&&(e.j41(0,"small",19),e.EFF(1," Telefone \xe9 obrigat\xf3rio "),e.k0s())}function N(t,m){1&t&&(e.j41(0,"small",19),e.EFF(1," Especialidade \xe9 obrigat\xf3ria "),e.k0s())}function $(t,m){if(1&t&&(e.j41(0,"div",3)(1,"label",20),e.EFF(2,"Status"),e.k0s(),e.nrm(3,"p-dropdown",21),e.k0s()),2&t){const a=e.XpG();e.R7$(3),e.Y8G("options",a.statusOptions)}}let G=(()=>{class t{constructor(){this.fb=(0,e.WQX)(i.ok),this.tecnicoService=(0,e.WQX)(I.n),this.notificationService=(0,e.WQX)(O.J),this.router=(0,e.WQX)(h.Ix),this.route=(0,e.WQX)(h.nX),this.statusOptions=Object.values(u)}ngOnInit(){this.form=this.fb.group({nome:["",[i.k0.required,i.k0.minLength(3)]],email:["",[i.k0.required,i.k0.email]],telefone:["",[i.k0.required]],especialidade:["",[i.k0.required]],status:[u.Ativo]});const a=this.route.snapshot.paramMap.get("id");a&&(this.tecnicoId=Number(a),this.loadTecnico())}loadTecnico(){this.tecnicoService.getById(this.tecnicoId).subscribe({next:a=>{this.form.patchValue(a)},error:()=>{this.notificationService.error("Erro ao carregar t\xe9cnico")}})}onSubmit(){if(this.form.valid){const a=this.form.value;this.tecnicoId?this.tecnicoService.update(this.tecnicoId,a).subscribe({next:()=>{this.notificationService.success("T\xe9cnico atualizado com sucesso"),this.router.navigate(["/tecnico"])},error:n=>{console.error("Erro ao atualizar t\xe9cnico:",n),console.error("Detalhes:",n.error);let o="Erro ao atualizar t\xe9cnico";n.error?.errors?o=Object.entries(n.error.errors).map(([c,l])=>`${c}: ${Array.isArray(l)?l.join(", "):l}`).join("\n"):n.error?.message&&(o=n.error.message),this.notificationService.error(o)}}):(console.log("Criando t\xe9cnico:",a),this.tecnicoService.create(a).subscribe({next:()=>{this.notificationService.success("T\xe9cnico criado com sucesso"),this.router.navigate(["/tecnico"])},error:n=>{console.error("Erro ao criar t\xe9cnico:",n),console.error("Detalhes:",n.error);let o="Erro ao criar t\xe9cnico";n.error?.errors?o=Object.entries(n.error.errors).map(([c,l])=>`${c}: ${Array.isArray(l)?l.join(", "):l}`).join("\n"):n.error?.message&&(o=n.error.message),this.notificationService.error(o)}}))}else this.notificationService.error("Por favor, preencha todos os campos obrigat\xf3rios")}onCancel(){this.router.navigate(["/tecnico"])}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-tecnico-form"]],standalone:!0,features:[e.aNF],decls:34,vars:11,consts:[[1,"form-container"],[1,"form-header"],[1,"p-fluid",3,"ngSubmit","formGroup"],[1,"field"],["for","nome",1,"required"],["id","nome","type","text","pInputText","","formControlName","nome","placeholder","Nome completo do t\xe9cnico"],["class","p-error",4,"ngIf"],[1,"p-grid"],[1,"p-col-12","p-md-6"],["for","email",1,"required"],["id","email","type","email","pInputText","","formControlName","email","placeholder","email@exemplo.com"],["for","telefone",1,"required"],["id","telefone","formControlName","telefone","mask","(99) 99999-9999","placeholder","(00) 00000-0000"],["for","especialidade",1,"required"],["id","especialidade","type","text","pInputText","","formControlName","especialidade","placeholder","Ex: El\xe9trica, Hidr\xe1ulica, etc."],["class","field",4,"ngIf"],[1,"form-actions"],["label","Cancelar","icon","pi pi-times","severity","secondary","type","button",3,"onClick","text"],["icon","pi pi-check","type","submit",3,"label","disabled"],[1,"p-error"],["for","status"],["id","status","formControlName","status","placeholder","Selecione o status",3,"options"]],template:function(n,o){if(1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"h2"),e.EFF(3),e.k0s()(),e.j41(4,"p-card")(5,"form",2),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(6,"div",3)(7,"label",4),e.EFF(8,"Nome"),e.k0s(),e.nrm(9,"input",5),e.DNE(10,M,2,0,"small",6),e.k0s(),e.j41(11,"div",7)(12,"div",8)(13,"div",3)(14,"label",9),e.EFF(15,"Email"),e.k0s(),e.nrm(16,"input",10),e.DNE(17,j,2,0,"small",6)(18,P,2,0,"small",6),e.k0s()(),e.j41(19,"div",8)(20,"div",3)(21,"label",11),e.EFF(22,"Telefone"),e.k0s(),e.nrm(23,"p-inputMask",12),e.DNE(24,S,2,0,"small",6),e.k0s()()(),e.j41(25,"div",3)(26,"label",13),e.EFF(27,"Especialidade"),e.k0s(),e.nrm(28,"input",14),e.DNE(29,N,2,0,"small",6),e.k0s(),e.DNE(30,$,4,1,"div",15),e.j41(31,"div",16)(32,"p-button",17),e.bIt("onClick",function(){return o.onCancel()}),e.k0s(),e.nrm(33,"p-button",18),e.k0s()()()()),2&n){let s,c,l,d,p;e.R7$(3),e.JRh(o.tecnicoId?"Editar T\xe9cnico":"Novo T\xe9cnico"),e.R7$(2),e.Y8G("formGroup",o.form),e.R7$(5),e.Y8G("ngIf",(null==(s=o.form.get("nome"))?null:s.hasError("required"))&&(null==(s=o.form.get("nome"))?null:s.touched)),e.R7$(7),e.Y8G("ngIf",(null==(c=o.form.get("email"))?null:c.hasError("required"))&&(null==(c=o.form.get("email"))?null:c.touched)),e.R7$(),e.Y8G("ngIf",(null==(l=o.form.get("email"))?null:l.hasError("email"))&&(null==(l=o.form.get("email"))?null:l.touched)),e.R7$(6),e.Y8G("ngIf",(null==(d=o.form.get("telefone"))?null:d.hasError("required"))&&(null==(d=o.form.get("telefone"))?null:d.touched)),e.R7$(5),e.Y8G("ngIf",(null==(p=o.form.get("especialidade"))?null:p.hasError("required"))&&(null==(p=o.form.get("especialidade"))?null:p.touched)),e.R7$(),e.Y8G("ngIf",o.tecnicoId),e.R7$(2),e.Y8G("text",!0),e.R7$(),e.Y8G("label",o.tecnicoId?"Atualizar":"Criar")("disabled",!o.form.valid)}},dependencies:[g.MD,g.bT,i.X1,i.qT,i.me,i.BC,i.cb,i.j4,i.JD,x.RG,k.fS,T.Hl,y.Ve,b.u,b.S,v.Zn,v.N5,E.kr,E.ms,C.tm,C.$n,F.D,F.Z],styles:['.form-container[_ngcontent-%COMP%]{padding:2rem;max-width:800px;margin:0 auto;animation:_ngcontent-%COMP%_fadeIn .3s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.form-header[_ngcontent-%COMP%]{margin-bottom:2rem;padding-bottom:1.5rem;border-bottom:2px solid #f0f0f0}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:2rem;font-weight:600;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-.5px}  .p-card{border-radius:16px;box-shadow:0 4px 12px #0000000d;border:none}  .p-card .p-card-body{padding:2rem}.field[_ngcontent-%COMP%]{margin-bottom:1.5rem}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:#495057;font-size:.938rem}.field[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:#f44336}  .p-inputtext,   .p-inputmask,   .p-dropdown{border-radius:12px;border:2px solid #e0e0e0;transition:all .3s ease}  .p-inputtext:enabled:focus,   .p-inputmask:enabled:focus,   .p-dropdown:not(.p-disabled).p-focus{border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}  .p-inputtext.ng-invalid.ng-dirty,   .p-inputmask.ng-invalid.ng-dirty,   .p-dropdown.ng-invalid.ng-dirty{border-color:#f44336}.p-error[_ngcontent-%COMP%]{display:block;margin-top:.25rem;font-size:.813rem;color:#f44336}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:2rem;padding-top:1.5rem;border-top:1px solid #f0f0f0}  .p-button{border-radius:12px;font-weight:500;padding:.75rem 1.5rem;transition:all .3s ease;box-shadow:0 2px 8px #00000014}  .p-button:not(.p-button-text):hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001f}  .p-button.p-button-primary{background:linear-gradient(135deg,#667eea,#764ba2);border:none}@media (max-width:768px){.form-container[_ngcontent-%COMP%]{padding:1rem}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}  .p-card .p-card-body{padding:1.5rem}.form-actions[_ngcontent-%COMP%]{flex-direction:column-reverse}.form-actions[_ngcontent-%COMP%]     .p-button{width:100%}}']})}}return t})()}}]);