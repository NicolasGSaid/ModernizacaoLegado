"use strict";(self.webpackChunklegacyprocs_frontend=self.webpackChunklegacyprocs_frontend||[]).push([[564],{564:(R,f,r)=>{r.r(f),r.d(f,{ClienteFormComponent:()=>y});var e=r(4438),_=r(177),t=r(9417),g=r(8498),v=r(6467),F=r(9631),k=r(8834),E=r(2242),C=r(4635),h=r(1141),b=r(491),M=r(773),P=r(6356);function O(o,d){1&o&&(e.j41(0,"small",30),e.EFF(1," Raz\xe3o social \xe9 obrigat\xf3ria "),e.k0s())}function x(o,d){1&o&&(e.j41(0,"small",30),e.EFF(1," M\xednimo de 3 caracteres "),e.k0s())}function I(o,d){1&o&&(e.j41(0,"small",30),e.EFF(1," CNPJ \xe9 obrigat\xf3rio "),e.k0s())}function D(o,d){1&o&&(e.j41(0,"small",30),e.EFF(1," CNPJ inv\xe1lido "),e.k0s())}function j(o,d){1&o&&(e.j41(0,"small",30),e.EFF(1," Email \xe9 obrigat\xf3rio "),e.k0s())}function T(o,d){1&o&&(e.j41(0,"small",30),e.EFF(1," Email inv\xe1lido "),e.k0s())}let y=(()=>{class o{constructor(){this.fb=(0,e.WQX)(t.ok),this.clienteService=(0,e.WQX)(M.M),this.notificationService=(0,e.WQX)(P.J),this.router=(0,e.WQX)(g.Ix),this.route=(0,e.WQX)(g.nX)}ngOnInit(){this.form=this.fb.group({razaoSocial:["",[t.k0.required,t.k0.minLength(3)]],nomeFantasia:[""],cnpj:["",[t.k0.required,t.k0.pattern(/^\d{14}$/)]],email:["",[t.k0.required,t.k0.email]],telefone:[""],endereco:["",[t.k0.required]],cidade:["",[t.k0.required]],estado:["",[t.k0.required,t.k0.minLength(2),t.k0.maxLength(2)]],cep:["",[t.k0.required,t.k0.pattern(/^\d{8}$/)]]});const a=this.route.snapshot.paramMap.get("id");a&&(this.clienteId=Number(a),this.loadCliente())}loadCliente(){this.clienteService.getById(this.clienteId).subscribe({next:a=>{this.form.patchValue(a)},error:()=>{this.notificationService.error("Erro ao carregar cliente")}})}onSubmit(){if(this.form.valid){const a=this.form.value;this.clienteId?this.clienteService.update(this.clienteId,a).subscribe({next:()=>{this.notificationService.success("Cliente atualizado com sucesso"),this.router.navigate(["/cliente"])},error:()=>{this.notificationService.error("Erro ao atualizar cliente")}}):(console.log("Criando cliente:",a),this.clienteService.create(a).subscribe({next:()=>{this.notificationService.success("Cliente criado com sucesso"),this.router.navigate(["/cliente"])},error:i=>{console.error("Erro ao criar cliente:",i),console.error("Detalhes:",i.error);let n="Erro ao criar cliente";i.error?.errors?n=Object.entries(i.error.errors).map(([s,l])=>`${s}: ${Array.isArray(l)?l.join(", "):l}`).join("\n"):i.error?.message&&(n=i.error.message),this.notificationService.error(n)}}))}else this.notificationService.error("Por favor, preencha todos os campos obrigat\xf3rios")}onCancel(){this.router.navigate(["/cliente"])}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-cliente-form"]],standalone:!0,features:[e.aNF],decls:60,vars:11,consts:[[1,"form-container"],[1,"form-header"],[1,"p-fluid",3,"ngSubmit","formGroup"],[1,"field"],["for","razaoSocial",1,"required"],["id","razaoSocial","type","text","pInputText","","formControlName","razaoSocial","placeholder","Digite a raz\xe3o social"],["class","p-error",4,"ngIf"],["for","nomeFantasia"],["id","nomeFantasia","type","text","pInputText","","formControlName","nomeFantasia","placeholder","Digite o nome fantasia"],[1,"p-grid"],[1,"p-col-12","p-md-6"],["for","cnpj",1,"required"],["id","cnpj","formControlName","cnpj","mask","99.999.999/9999-99","placeholder","00.000.000/0000-00"],["for","telefone"],["id","telefone","formControlName","telefone","mask","(99) 99999-9999","placeholder","(00) 00000-0000"],["for","email",1,"required"],["id","email","type","email","pInputText","","formControlName","email","placeholder","email@exemplo.com"],[1,"p-col-12","p-md-8"],["for","endereco"],["id","endereco","type","text","pInputText","","formControlName","endereco","placeholder","Rua, n\xfamero"],[1,"p-col-12","p-md-4"],["for","cep"],["id","cep","formControlName","cep","mask","99999-999","placeholder","00000-000"],["for","cidade"],["id","cidade","type","text","pInputText","","formControlName","cidade","placeholder","Nome da cidade"],["for","estado"],["id","estado","type","text","pInputText","","formControlName","estado","placeholder","UF","maxlength","2"],[1,"form-actions"],["label","Cancelar","icon","pi pi-times","severity","secondary","type","button",3,"onClick","text"],["icon","pi pi-check","type","submit",3,"label","disabled"],[1,"p-error"]],template:function(i,n){if(1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"h2"),e.EFF(3),e.k0s()(),e.j41(4,"p-card")(5,"form",2),e.bIt("ngSubmit",function(){return n.onSubmit()}),e.j41(6,"div",3)(7,"label",4),e.EFF(8,"Raz\xe3o Social"),e.k0s(),e.nrm(9,"input",5),e.DNE(10,O,2,0,"small",6)(11,x,2,0,"small",6),e.k0s(),e.j41(12,"div",3)(13,"label",7),e.EFF(14,"Nome Fantasia"),e.k0s(),e.nrm(15,"input",8),e.k0s(),e.j41(16,"div",9)(17,"div",10)(18,"div",3)(19,"label",11),e.EFF(20,"CNPJ"),e.k0s(),e.nrm(21,"p-inputMask",12),e.DNE(22,I,2,0,"small",6)(23,D,2,0,"small",6),e.k0s()(),e.j41(24,"div",10)(25,"div",3)(26,"label",13),e.EFF(27,"Telefone"),e.k0s(),e.nrm(28,"p-inputMask",14),e.k0s()()(),e.j41(29,"div",3)(30,"label",15),e.EFF(31,"Email"),e.k0s(),e.nrm(32,"input",16),e.DNE(33,j,2,0,"small",6)(34,T,2,0,"small",6),e.k0s(),e.j41(35,"div",9)(36,"div",17)(37,"div",3)(38,"label",18),e.EFF(39,"Endere\xe7o"),e.k0s(),e.nrm(40,"input",19),e.k0s()(),e.j41(41,"div",20)(42,"div",3)(43,"label",21),e.EFF(44,"CEP"),e.k0s(),e.nrm(45,"p-inputMask",22),e.k0s()()(),e.j41(46,"div",9)(47,"div",10)(48,"div",3)(49,"label",23),e.EFF(50,"Cidade"),e.k0s(),e.nrm(51,"input",24),e.k0s()(),e.j41(52,"div",10)(53,"div",3)(54,"label",25),e.EFF(55,"Estado"),e.k0s(),e.nrm(56,"input",26),e.k0s()()(),e.j41(57,"div",27)(58,"p-button",28),e.bIt("onClick",function(){return n.onCancel()}),e.k0s(),e.nrm(59,"p-button",29),e.k0s()()()()),2&i){let m,s,l,c,p,u;e.R7$(3),e.JRh(n.clienteId?"Editar Cliente":"Novo Cliente"),e.R7$(2),e.Y8G("formGroup",n.form),e.R7$(5),e.Y8G("ngIf",(null==(m=n.form.get("razaoSocial"))?null:m.hasError("required"))&&(null==(m=n.form.get("razaoSocial"))?null:m.touched)),e.R7$(),e.Y8G("ngIf",(null==(s=n.form.get("razaoSocial"))?null:s.hasError("minlength"))&&(null==(s=n.form.get("razaoSocial"))?null:s.touched)),e.R7$(11),e.Y8G("ngIf",(null==(l=n.form.get("cnpj"))?null:l.hasError("required"))&&(null==(l=n.form.get("cnpj"))?null:l.touched)),e.R7$(),e.Y8G("ngIf",(null==(c=n.form.get("cnpj"))?null:c.hasError("pattern"))&&(null==(c=n.form.get("cnpj"))?null:c.touched)),e.R7$(10),e.Y8G("ngIf",(null==(p=n.form.get("email"))?null:p.hasError("required"))&&(null==(p=n.form.get("email"))?null:p.touched)),e.R7$(),e.Y8G("ngIf",(null==(u=n.form.get("email"))?null:u.hasError("email"))&&(null==(u=n.form.get("email"))?null:u.touched)),e.R7$(24),e.Y8G("text",!0),e.R7$(),e.Y8G("label",n.clienteId?"Atualizar":"Criar")("disabled",!n.form.valid)}},dependencies:[_.MD,_.bT,t.X1,t.qT,t.me,t.BC,t.cb,t.tU,t.j4,t.JD,v.RG,F.fS,k.Hl,E.u,E.S,C.Zn,C.N5,h.tm,h.$n,b.D,b.Z],styles:['.form-container[_ngcontent-%COMP%]{padding:2rem;max-width:900px;margin:0 auto;animation:_ngcontent-%COMP%_fadeIn .3s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.form-header[_ngcontent-%COMP%]{margin-bottom:2rem;padding-bottom:1.5rem;border-bottom:2px solid #f0f0f0}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:2rem;font-weight:600;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-.5px}  .p-card{border-radius:16px;box-shadow:0 4px 12px #0000000d;border:none}  .p-card .p-card-body{padding:2rem}.field[_ngcontent-%COMP%]{margin-bottom:1.5rem}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:#495057;font-size:.938rem}.field[_ngcontent-%COMP%]   label.required[_ngcontent-%COMP%]:after{content:" *";color:#f44336}  .p-inputtext,   .p-inputmask{border-radius:12px;border:2px solid #e0e0e0;transition:all .3s ease}  .p-inputtext:enabled:focus,   .p-inputmask:enabled:focus{border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}  .p-inputtext.ng-invalid.ng-dirty,   .p-inputmask.ng-invalid.ng-dirty{border-color:#f44336}.p-error[_ngcontent-%COMP%]{display:block;margin-top:.25rem;font-size:.813rem;color:#f44336}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:2rem;padding-top:1.5rem;border-top:1px solid #f0f0f0}  .p-button{border-radius:12px;font-weight:500;padding:.75rem 1.5rem;transition:all .3s ease;box-shadow:0 2px 8px #00000014}  .p-button:not(.p-button-text):hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001f}  .p-button.p-button-primary{background:linear-gradient(135deg,#667eea,#764ba2);border:none}@media (max-width: 768px){.form-container[_ngcontent-%COMP%]{padding:1rem}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}  .p-card .p-card-body{padding:1.5rem}.form-actions[_ngcontent-%COMP%]{flex-direction:column-reverse}.form-actions[_ngcontent-%COMP%]     .p-button{width:100%}}']})}}return o})()}}]);